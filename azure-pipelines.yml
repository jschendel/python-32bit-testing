trigger:
- master

jobs:
- job: 'Windows'
  pool:
    vmImage: 'windows-latest'
  strategy:
    matrix:
      "Python 3.6, 32 bit":
        python.version: '3.6.8'
        python.pkg: 'pythonx86'
      "Python 3.7, 32 bit":
        python.version: '3.7.5'
        python.pkg: 'pythonx86'
      "Python 3.8, 32 bit":
        python.version: '3.8.0'
        python.pkg: 'pythonx86'
  steps:
  - task: NuGetToolInstaller@0
  - bash: ci/all_windows.sh

- job: 'Linux'
  pool:
    vmImage: 'ubuntu-latest'
  strategy:
    matrix:
      "Python 3.6, 32 bit":
        python.version: '3.6'
      "Python 3.7, 32 bit":
        python.version: '3.7'
  steps:
  - script: |
      echo '##vso[task.prependpath]$(HOME)/miniconda3/bin'
      echo "Creating Environment"
      ci/env_linux.sh
    displayName: 'Setup environment'
  - script: |
      source activate test-env
      test.sh
